{"version":3,"sources":["../models/UserModel.js","../components/LandingPage!jsx","LandingPage.js"],"names":["authToken","define","_","Backbone","urlStore","UserModel","Model","extend","baseUrl","login_url","initialize","url","this","parse","response","deleteTokens","localStorage","clear","logged_in","getItem","$","React","BackBoneReact","LoginTemplate","createBackboneClass","render","createElement","className","src","type","placeholder","name","autofocus","id","role","LandingPageTemplate","LandingPage","View","el","events","keyup #password","createFactory","checkKey","e","code","which","login","setUserCredentials","ApiAccessToken","Uid","setItem","history","navigate","trigger"],"mappings":"AAAA,AACA,GAAAA,WAAA,EACAC,QAAA,QACA,aACA,WACA,YACA,SAAAC,EAAAC,EAAAC,GACA,YAMA,IAAAC,GAAAF,EAAAG,MAAAC,QAEAC,QAAAJ,EAAAK,UAEAC,WAAA,aAEAC,IAAA,WACA,MAAAC,MAAAJ,SAGAK,MAAA,SAAAC,GACA,MAAAA,IAOAC,aAAA,WACAC,aAAAC,SAGAC,UAAA,WACA,MAAAF,cAAAG,QAAA,mBAGA,OAAAd,KCrCAJ,OAAA,uDACA,SACA,aACA,WACA,QACA,iBAEA,SAAAmB,EAAAlB,EAAAC,EAAAkB,EAAAC,GACA,YACA,IAAAC,GAAAF,EAAAG,qBACAC,OAAA,WACA,MACAJ,GAAAK,cAAA,MAAA,KACAL,EAAAK,cAAA,OAAAC,UAAA,oBACAN,EAAAK,cAAA,OAAAC,UAAA,cACAN,EAAAK,cAAA,OAAAC,UAAA,4BACAN,EAAAK,cAAA,OAAAC,UAAA,6CACAN,EAAAK,cAAA,OAAAC,UAAA,iBACAN,EAAAK,cAAA,OAAAE,IAAA,4BAEAP,EAAAK,cAAA,OAAAC,UAAA,cACAN,EAAAK,cAAA,MAAA,KAAA,aAEAL,EAAAK,cAAA,OAAAC,UAAA,kBACAN,EAAAK,cAAA,OAAAC,UAAA,aACAN,EAAAK,cAAA,SAAAG,KAAA,OAAAC,YAAA,aAAAC,KAAA,QAAAC,UAAA,OAAAL,UAAA,mBAGAN,EAAAK,cAAA,OAAAC,UAAA,kBACAN,EAAAK,cAAA,OAAAC,UAAA,aACAN,EAAAK,cAAA,SAAAG,KAAA,WAAAC,YAAA,WAAAG,GAAA,WAAAF,KAAA,WAAAJ,UAAA,mBAGAN,EAAAK,cAAA,OAAAC,UAAA,kBACAN,EAAAK,cAAA,OAAAC,UAAA,aACAN,EAAAK,cAAA,UAAAC,UAAA,gBAAA,YACAN,EAAAK,cAAA,QAAAC,UAAA,gCAEAN,EAAAK,cAAA,OAAAC,UAAA,mBAAA,wCAMAN,EAAAK,cAAA,WAAA,KACAL,EAAAK,cAAA,OAAAC,UAAA,2BACAN,EAAAK,cAAA,OAAAC,UAAA,wBACAN,EAAAK,cAAA,OAAAC,UAAA,eAAAO,KAAA,YACAb,EAAAK,cAAA,OAAAC,UAAA,iBACAN,EAAAK,cAAA,OAAAC,UAAA,gBACAN,EAAAK,cAAA,MAAAC,UAAA,0BAAAM,GAAA,gBAAA,qBAEAZ,EAAAK,cAAA,OAAAC,UAAA,cACAN,EAAAK,cAAA,OAAAC,UAAA,8BACAN,EAAAK,cAAA,OAAAE,IAAA,kCACAP,EAAAK,cAAA,OAAAC,UAAA,uBACAN,EAAAK,cAAA,KAAA,KAAA,wEAYA,OAAAH,KAGAtB,OAAA,8CCxEA,SACA,aACA,WACA,OACA,QACA,uDAGA,SAAAmB,EAAAlB,EAAAC,EAAAE,EAAAgB,EAAAc,GACA,YACA,IAAAC,GAAAjC,EAAAkC,KAAA9B,QAMA+B,GAAAlB,EAAA,SAEAmB,QAEAC,kBAAA,YAOA9B,WAAA,aAKAe,OAAA,WACA,GAAAW,GAAAf,EAAAoB,cAAAN,EACAd,GAAAI,OAAAW,IAAAxB,KAAA0B,KAOAI,SAAA,SAAAC,GACA,GAAAC,GAAAD,EAAAE,KACA,KAAAD,GACAhC,KAAAkC,SAuCAC,mBAAA,SAAAC,EAAAC,GACAjC,aAAAkC,QAAA,gBAAAF,GACAhC,aAAAkC,QAAA,MAAAD,GACA9C,EAAAgD,QAAAC,SAAA,eACAC,SAAA,MAIA,OAAAjB;AF3FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzCA,AD0CA;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"scripts/modules/restaurant/users/views/LandingPage.js","sourcesContent":["// Filename: models/LoginModel.js\nvar authToken = ''\ndefine('user',[\n  'underscore',\n  'backbone',\n  'urlStore'\n], function(_, Backbone, urlStore) {\n  'use strict';\n  /**\n    * @lends UserModel.prototype\n    * @memberof module:UserModule\n    * @class UserModel\n  */\n  var UserModel = Backbone.Model.extend({\n\n    baseUrl: urlStore.login_url,\n\n    initialize: function() {},\n\n    url: function() {\n      return this.baseUrl;\n    },\n\n    parse: function(response) {\n      return response;\n    },\n\n    /**\n     * [deleteTokens : remove user session object from localstorage and logout of app.]\n     * @return {[type]} [null]\n     */\n    deleteTokens: function() {\n      localStorage.clear();\n    },\n\n    logged_in: function() {\n      return localStorage.getItem(\"session_token\");\n    }\n  });\n  return UserModel\n});\n\n","\n/** @jsx React.DOM */\ndefine('jsx!modules/restaurant/users/components/LandingPage',[\n'jquery',\n'underscore',\n'backbone',\n'react',\n'reactbackbone'\n],\nfunction($, _, Backbone, React, BackBoneReact) {\n\"use strict\";\nvar LoginTemplate = React.createBackboneClass({\nrender: function() {\nreturn (\nReact.createElement(\"div\", null, \n  React.createElement(\"div\", {className: \"login-container\"}), \n  React.createElement(\"div\", {className: \"overlayBg\"}), \n  React.createElement(\"div\", {className: \"LoginOverLay text-center\"}, \n    React.createElement(\"div\", {className: \"loginBox col-sm-12 col-md-4 col-md-push-4\"}, \n      React.createElement(\"div\", {className: \"main_TinyLogo\"}, \n        React.createElement(\"img\", {src: \"images/TinyOwlLogo.png\"})\n      ), \n      React.createElement(\"div\", {className: \"TinyHeader\"}, \n        React.createElement(\"div\", null, \"Business\")\n      ), \n      React.createElement(\"div\", {className: \"form-group row\"}, \n        React.createElement(\"div\", {className: \"col-sm-12\"}, \n          React.createElement(\"input\", {type: \"text\", placeholder: \"Mobile No.\", name: \"email\", autofocus: \"true\", className: \"form-control\"})\n        )\n      ), \n      React.createElement(\"div\", {className: \"form-group row\"}, \n        React.createElement(\"div\", {className: \"col-sm-12\"}, \n          React.createElement(\"input\", {type: \"password\", placeholder: \"Password\", id: \"password\", name: \"password\", className: \"form-control\"})\n        )\n      ), \n      React.createElement(\"div\", {className: \"form-group row\"}, \n        React.createElement(\"div\", {className: \"col-sm-12\"}, \n          React.createElement(\"button\", {className: \"btn loginBtn\"}, \"Log In   \", \n            React.createElement(\"span\", {className: \"fa fa-spinner fa-spin hide\"})\n          ), \n          React.createElement(\"div\", {className: \"errorToast hide\"}, \"Incorrect Mobile No. or Password\")\n        )\n      )\n    )\n  ), \n\n  React.createElement(\"netError\", null, \n    React.createElement(\"div\", {className: \"net_error_overlay hide\"}), \n    React.createElement(\"div\", {className: \"net_error_modal hide\"}, \n      React.createElement(\"div\", {className: \"modal-dialog\", role: \"document\"}, \n        React.createElement(\"div\", {className: \"modal-content\"}, \n          React.createElement(\"div\", {className: \"modal-header\"}, \n            React.createElement(\"h3\", {className: \"modal-title text-center\", id: \"myModalLabel\"}, \"Tinyowl Business\")\n          ), \n          React.createElement(\"div\", {className: \"modal-body\"}, \n            React.createElement(\"div\", {className: \"net_conn_error text-center\"}, \n              React.createElement(\"img\", {src: \"images/connection_problem.png\"}), \n              React.createElement(\"div\", {className: \"modal-title proxima\"}, \n                React.createElement(\"h4\", null, \"There seemes to be an error with your internet connection.\")\n              )\n            )\n          )\n        )\n      )\n    )\n  )\n)\n);\n}\n});\nreturn LoginTemplate;\n});\n\n","define('modules/restaurant/users/views/LandingPage',[\n  'jquery',\n  'underscore',\n  'backbone',\n  'user',\n  'react',\n  'jsx!modules/restaurant/users/components/LandingPage'\n],\n\nfunction($, _, Backbone, UserModel, React, LandingPageTemplate) {\n  'use strict';\n  var LandingPage = Backbone.View.extend({\n    /**\n     * @lends LandingPage.prototype\n     * @memberof module:Users\n     * @class: LandingPage\n     */\n    el: $('#main'),\n\n    events: {\n      //'click .loginBtn': 'login',\n      'keyup #password': 'checkKey'\n    },\n\n    /**\n     * initialize : landing page view constructor\n     * @constructs: LandingPageView and Its components\n     */\n    initialize: function() {},\n    /**\n     * [render : Render Template to VDOM]\n     * @return {[type]} [no return type]\n     */\n    render: function() {\n      var LandingPage = React.createFactory(LandingPageTemplate);\n      React.render(LandingPage(), this.el);\n    },\n    /**\n     * [checkKey :Check if enter key is pressed in password box]\n     * @param  {[type]} e [element]\n     * @return {[type]}   [nill]\n     */\n    checkKey: function(e) {\n      var code = e.which;\n      if (code == 13) {\n        this.login();\n      }\n    },\n    /**\n     * [login : Log into tinyowl restrowebapp]\n     * @return {[type]} [no return type]\n     */\n    // login: function() {\n    //   var that = this;\n    //   if ($(\"input[name='email']\").val().length == 0 || $(\"input[name='password']\").val().length == 0) {\n    //     helper.showErrorToast('Mobile No. / Password cannot be empty');\n    //   } else {\n    //     helper.showLoader('show');\n    //     this.user = new UserModel();\n    //     this.user.save({\n    //       'email': $(\"input[name='email']\").val(),\n    //       'password': $(\"input[name='password']\").val(),\n    //     }, {\n    //       success: function(response) {\n    //         localStorage.setItem('user_profile', JSON.stringify(response.get('profile')));\n    //         that.setUserCredentials(response.get('profile').session_token, response.get('profile').id);\n    //       },\n    //       error: function(jqXHR, textStatus, errorThrown) {\n    //         if (textStatus.status === 0) {\n    //           helper.showNoNetConnection(textStatus.status)\n    //         } else {\n    //           helper.showErrorToast('Incorrect Mobile No. or Password');\n    //           helper.showLoader('no-show');\n    //         }\n    //       }\n    //     });\n    //   }\n    // },\n\n    /**\n     * [setUserCredentials : set user_id and access_token in localstorage]\n     * @param {[type]} session_token [string]\n     * @param {[type]} Uid            [string]\n     */\n    setUserCredentials: function(ApiAccessToken, Uid) {\n      localStorage.setItem('session_token', ApiAccessToken);\n      localStorage.setItem('Uid', Uid);\n      Backbone.history.navigate('order_panel', {\n        trigger: true\n      });\n    }\n  });\n  return LandingPage;\n\n});\n\n"]}