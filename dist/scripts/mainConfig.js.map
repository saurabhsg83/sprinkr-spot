{"version":3,"sources":["amd-config.js","modules/restaurant/users/models/UserModel.js","utilities/backbone_extend.js","routemap.js","config.js","router.js","app.js","mainConfig.js"],"names":["factory","define","amd","exports","module","path","appDir","baseUrl","paths","alertify","jquery","jqueryui","backbone","localstorage","underscore","react","react-dom","react-bootstrap","JSXTransformer","jsx","text","reactbackbone","BackboneReactComponentmixin","bootstrap","urlStore","backbone_extend","user","react-dnd","react-dnd-html5-backend","shim","crypto","machina","waitSeconds","fileExtension","transformOptions","harmony","stripTypes","inlineSourceMap","usePragma","authToken","_","Backbone","UserModel","Model","extend","login_url","initialize","url","this","parse","response","deleteTokens","localStorage","clear","logged_in","getItem","on","$","show","hide","ajaxPrefilter","options","originalOptions","jqXHR","ApiAccessToken","setRequestHeader","xhrFields","withCredentials","Router","prototype","before","route","route_exception","Object","keys","routes","include","navigate","trigger","after","name","callback","isRegExp","_routeToRegExp","isFunction","_this","history","fragment","args","_extractParameters","apply","arguments","execute","concat","View","remove","killChildViews","unsubscribe","$el","empty","stopListening","undelegateEvents","unbind","childViews","forEach","childView","subscriptions","subscription","routemap","SittingPlan","tinyPos","currentViews","routeMap","","logout","spot","*path","console","log","each","CurrentView","off","Logout","require","logoutPage","replace","current_view","push","render","showLandingPage","defaultView","lib","start","root","AMD_CONFIG","config","App","undefined"],"mappings":"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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrGA,ADsGA;ACrGA;AACA;AACA;AACA;AACA;AACA;AACA;ACPA,ADQA;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzEA,AD0EA;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"scripts/mainConfig.js","sourcesContent":["(function(factory) {\n  if (typeof define === 'function' && define.amd) {\n    // Register as an AMD module if available...\n    define('amd-config',[], factory);\n  } else if (typeof exports === 'object') {\n    // Next for Node.js, CommonJS, browserify...\n    module.exports = factory();\n  } else {\n    // Browser globals for the unenlightened...\n    factory();\n  }\n}\n(function() {\n  var path = {\n    appDir: '',\n    baseUrl: 'scripts/',\n    paths: {\n      alertify:'vendor/bower_components/alertifyjs/build/alertify',\n      jquery: 'vendor/bower_components/jquery/dist/jquery',\n      jqueryui:'vendor/bower_components/jquery-ui/jquery-ui',\n      backbone: 'vendor/bower_components/backbone/backbone',\n      localstorage: 'vendor/bower_components/backbone.localStorage',\n      underscore: 'vendor/bower_components/lodash/lodash',\n      react: 'vendor/bower_components/react/react',\n      'react-dom':'vendor/bower_components/react/react-dom',\n      'react-bootstrap':'vendor/bower_components/react-bootstrap/react-bootstrap',\n      JSXTransformer: 'vendor/bower_components/jsx-requirejs-plugin/js/JSXTransformer',\n      jsx: 'vendor/bower_components/jsx-requirejs-plugin/js/jsx',\n      text: 'vendor/bower_components/requirejs-text/text',\n      reactbackbone: 'vendor/bower_components/react.backbone/react.backbone',\n      BackboneReactComponentmixin: 'vendor/bower_components/backbone-react-component/lib/component',\n      bootstrap: 'vendor/bower_components/bootstrap/dist/js/bootstrap.min',\n      urlStore: 'modules/restaurant/helper/urlStore',\n      backbone_extend: 'utilities/backbone_extend',\n      user: 'modules/restaurant/users/models/UserModel',\n      'react-dnd': 'vendor/bower_components/react-dnd/dist/ReactDnD.min',\n      'react-dnd-html5-backend': '../../node_modules/react-dnd-html5-backend/dist/ReactDnDHTML5Backend.min'\n    },\n    shim: {\n      bootstrap: ['jquery'],\n      underscore: {\n        exports: '_'\n      },\n      react: {\n        exports: 'React'\n      },\n      crypto : {\n        exports : 'CryptoJS'\n      },\n      JSXTransformer: 'JSXTransformer',\n      machina: ['underscore']\n    },\n    waitSeconds: 0,\n    jsx: {\n      fileExtension: '.jsx',\n      transformOptions: {\n        harmony: true,\n        stripTypes: false,\n        inlineSourceMap: true\n      },\n      usePragma: false\n    }\n  };\n  return path;\n}));\n\n","// Filename: models/LoginModel.js\nvar authToken = ''\ndefine('user',[\n  'underscore',\n  'backbone',\n  'urlStore'\n], function(_, Backbone, urlStore) {\n  'use strict';\n  /**\n    * @lends UserModel.prototype\n    * @memberof module:UserModule\n    * @class UserModel\n  */\n  var UserModel = Backbone.Model.extend({\n\n    baseUrl: urlStore.login_url,\n\n    initialize: function() {},\n\n    url: function() {\n      return this.baseUrl;\n    },\n\n    parse: function(response) {\n      return response;\n    },\n\n    /**\n     * [deleteTokens : remove user session object from localstorage and logout of app.]\n     * @return {[type]} [null]\n     */\n    deleteTokens: function() {\n      localStorage.clear();\n    },\n\n    logged_in: function() {\n      return localStorage.getItem(\"session_token\");\n    }\n  });\n  return UserModel\n});\n\n","define('backbone_extend',[\n  'backbone',\n  'user'\n],\nfunction(Backbone, UserModel) {\n  var user = new UserModel();\n  Backbone.on('loading', function () {\n    $('#loading').show();\n  });\n\n  Backbone.on('stop_loading', function () {\n    $('#loading').hide();\n  });\n\n  //add ajax filter for session token to be sent on ajax requests\n  $.ajaxPrefilter(function(options, originalOptions, jqXHR) {\n    var ApiAccessToken = user.logged_in();\n    if (!!ApiAccessToken) {\n      jqXHR.setRequestHeader('session_token', ApiAccessToken);\n    }\n\n    //to support cross domain requests\n    options.xhrFields = {\n      withCredentials: true\n    };\n  });\n\n  _.extend(Backbone.Router.prototype, {\n    before: function(route) {\n      var all_routes = Object.keys(this.routes);\n      var route_exception = [''];\n      if (user.logged_in() || _.include(route_exception, route)) {\n        return true;\n      }else {\n        this.navigate('', {\n          trigger: true\n        });\n        return false;\n      }\n    },\n\n    after: function(route) {},\n\n    route: function(route, name, callback) {\n      if (!_.isRegExp(route)) {\n        route = this._routeToRegExp(route);\n      }\n\n      if (_.isFunction(name)) {\n        callback = name;\n        name = '';\n      }\n\n      if (!callback) callback = this[name];\n\n      var _this = this;\n      Backbone.history.route(route, function(fragment) {\n        var args = _this._extractParameters(route, fragment);\n        if (!_this.before.apply(_this, arguments)) {\n          return;\n        }\n\n        if (_this.execute(callback, args, name)) {\n          _this.after.apply(_this, arguments);\n          _this.trigger.apply(_this, ['route:' + name].concat(args));\n          _this.trigger('route', name, args);\n          Backbone.history.trigger('route', _this, name, args);\n        }\n\n      });\n      return this;\n    }\n  });\n\n  _.extend(Backbone.View.prototype, {\n    remove: function() {\n      this.killChildViews();\n      this.unsubscribe();\n      this.$el.empty();\n      this.stopListening();\n      this.undelegateEvents();\n      this.unbind();\n    },\n\n    killChildViews: function() {\n      var childViews = this.childViews || [];\n      childViews.forEach(function(childView) {\n        childView.remove();\n      });\n    },\n\n    unsubscribe: function() {\n      var subscriptions = this.subscriptions || [];\n      subscriptions.forEach(function(subscription) {\n        subscription.unsubscribe();\n      });\n    }\n\n  });\n  return Backbone;\n});\n\n","/* mapping of route action to the corresponding view */\ndefine('routemap',[],function () {\n  var routemap = {\n    SittingPlan: 'modules/employee_management/views/spot_main_view'\n  };\n  return routemap;\n});\n\n","define('config',[\n  'backbone'\n],\nfunction (Backbone) {\n  var tinyPos = {};\n  tinyPos.currentViews = [];\n  return tinyPos;\n});\n\n","// Filename: router.js\ndefine('router',[\n  'jquery',\n  'underscore',\n  'backbone_extend',\n  'routemap',\n  'config',\n  'user'\n],\nfunction ($, _, Backbone, routeMap, tinyPos, UserModel) {\n  'use strict';\n  var Router = Backbone.Router.extend({\n    routes: {\n      '': 'showLandingPage',\n      logout: 'Logout',\n      spot: 'spot',\n      '*path': 'defaultView'\n    },\n\n\n    initialize: function () {\n      console.log(\"router initialized\");\n    },\n\n    execute: function (callback, args) {\n      _.each(tinyPos.currentViews, function (CurrentView) {\n        CurrentView.remove();\n      });\n      Backbone.off();\n\n      if (callback) {\n        callback.apply(this, args);\n      }\n    },\n\n    Logout: function() {\n      require([routeMap.logoutPage], function () {\n        require([routeMap.logoutPage.replace(/\\..*/, '')], function (View) {\n          var current_view = new View();\n          tinyPos.currentViews.push(current_view);\n          current_view.render()\n        });\n      });\n    },\n\n    showLandingPage: function() {\n      require([routeMap.SittingPlan], function () {\n        require([routeMap.SittingPlan.replace(/\\..*/, '')], function (View) {\n          var current_view = new View();\n          tinyPos.currentViews.push(current_view);\n          current_view.render()\n        });\n      });\n    },\n\n    spot: function() {\n      require([routeMap.SittingPlan], function () {\n        require([routeMap.SittingPlan.replace(/\\..*/, '')], function (View) {\n          var current_view = new View();\n          tinyPos.currentViews.push(current_view);\n          current_view.render()\n        });\n      });\n    },\n\n    defaultView: function() {\n      Backbone.history.navigate('spot', {\n        trigger: true\n      })\n    }\n  });\n  return Router;\n});\n\n","// Filename: app.js\ndefine('app',[\n  'libs',\n  'router'\n],\nfunction(lib, Router) {\n  var initialize = function() {\n    var router = new Router();\n\n    Backbone.history.start({\n      root: '/'\n    });\n  }\n\n  return {\n    'initialize': initialize\n  }\n});\n\n","/*global require*/\n'use strict';\nrequire(['amd-config'], function (AMD_CONFIG) {\n  require.config(AMD_CONFIG);\n  require(['libs'], function () {\n    require([\n      'app',\n      'jquery'\n    ], function (App, $) {\n      App.initialize();\n        $.ajaxPrefilter(function(options, originalOptions, jqXHR) {\n          var ApiAccessToken = localStorage.getItem('session_token');\n          if (ApiAccessToken !== undefined) {\n            jqXHR.setRequestHeader('session_token', ApiAccessToken);\n          }\n          options.xhrFields = {\n            withCredentials: true\n          };\n        });\n    });\n  });\n});\n\ndefine(\"mainConfig\", function(){});\n\n"]}